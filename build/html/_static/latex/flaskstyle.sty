%
% flaskstyle.sty
%
% Adapted from flaskstyle.sty and typo3.sty


% Logo
\newcommand{\canopeelogo}{\includegraphics[height=.6cm]{canopee-sidebarlogo}}

% Colors
\definecolor{typo3orange}{RGB}{255, 135, 0}
\definecolor{TitleColor}{rgb}{0,0,0}
\definecolor{InnerLinkColor}{rgb}{0,0,0}

% Titles
\renewcommand{\py@HeaderFamily}{\bfseries}
% % Color of hugh chapter headlines (chapter headlines are the big main headlines like INTRODUCTION)
% \ChTitleVar{\raggedleft \rm\Huge\py@HeaderFamily\color{typo3orange}}

\renewcommand{\maketitle}{%
  \begin{titlepage}%
    \let\footnotesize\small
    \let\footnoterule\relax
    \ifsphinxpdfoutput
      \begingroup
      % This \def is required to deal with multi-line authors; it
      % changes \\ to ', ' (comma-space), making it pass muster for
      % generating document info in the PDF file.
      \def\\{, }
      \pdfinfo{
        /Author (\@author)
        /Title (\@title)
      }
      \endgroup
    \fi
    \begin{flushright}%
      %\sphinxlogo%
      {\center
        \vspace*{3cm}
      	\includegraphics[height=3cm]{canopee_logo.pdf}
        \vspace{3cm}
	\par
        {\rm\Huge \@title \par}%
        {\em\LARGE \py@release\releaseinfo \par}
        {\large
         \@date \par
         \py@authoraddress \par
        }}%
    \end{flushright}%\par
    \@thanks
  \end{titlepage}%
  \cleardoublepage%
  \setcounter{footnote}{0}%
  \let\thanks\relax\let\maketitle\relax
  %\gdef\@thanks{}\gdef\@author{}\gdef\@title{}
}


\fancypagestyle{normal}{
  \fancyhf{}
  \fancyfoot[LE,RO]{{\py@HeaderFamily\thepage}}
  \fancyfoot[LO]{{\py@HeaderFamily\nouppercase{\rightmark}}}
  %\fancyfoot[RE]{{\nouppercase{\leftmark}}}
  \fancyfoot[RE]{{\canopeelogo}}
  %\fancyhead[LE,RO]{{ \@title, \py@release}}
  \fancyhead[LE]{{\py@HeaderFamily \@title, \py@release}}
  \fancyhead[RO]{{\py@HeaderFamily\nouppercase{\leftmark}}}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0.4pt}
}

\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[LE,RO]{{\thepage}}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.4pt}
}

\titleformat{\section}{\Large}%
            {\py@TitleColor\thesection}{0.5em}{\py@TitleColor}{\py@NormalColor}
\titleformat{\subsection}{\large}%
            {\py@TitleColor\thesubsection}{0.5em}{\py@TitleColor}{\py@NormalColor}
\titleformat{\subsubsection}{}%
            {\py@TitleColor\thesubsubsection}{0.5em}{\py@TitleColor}{\py@NormalColor}
\titleformat{\paragraph}{\large}%
            {\py@TitleColor}{0em}{\py@TitleColor}{\py@NormalColor}

\ChNameVar{\raggedleft\normalsize}
\ChNumVar{\raggedleft \bfseries\Large}
\ChTitleVar{\raggedleft \rm\Huge}

\renewcommand\thepart{\@Roman\c@part}
\renewcommand\part{%
   \pagestyle{plain}
   \if@noskipsec \leavevmode \fi
   \cleardoublepage
   \vspace*{6cm}%
   \@afterindentfalse
   \secdef\@part\@spart}

\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >\m@ne
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    {\parindent \z@ %\center
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >\m@ne
       \rm\Large \partname~\thepart
       \par\nobreak
     \fi
     \MakeUppercase{\rm\Huge #2}%
     \markboth{}{}\par}%
    \nobreak
    \vskip 8ex
    \@afterheading}
\def\@spart#1{%
    {\parindent \z@ %\center
     \interlinepenalty \@M
     \normalfont
     \huge \bfseries #1\par}%
     \nobreak
     \vskip 3ex
     \@afterheading}

% % use inconsolata font
% \usepackage{inconsolata}

% fix single quotes, for inconsolata. (does not work)
%%\usepackage{textcomp}
%%\begingroup
%%  \catcode`'=\active
%%  \g@addto@macro\@noligs{\let'\textsinglequote}
%%  \endgroup
%%\endinput

\usepackage{float}

\usepackage{ifthen}
\setlength\fboxsep{0pt}
\setlength\fboxrule{1pt}

% \usepackage{fancybox, graphicx}
% \let\OLDincludegraphics\includegraphics
% \newlength{\somewidth}
% \renewcommand{\includegraphics}[1]{
%   \settowidth{\somewidth}{\OLDincludegraphics{#1}}
%   \ifnum\pdfstrcmp{#1}{logo.pdf}=0
%     \OLDincludegraphics{#1}
%   \else
%     \ifthenelse{\lengthtest{\somewidth>8cm}}{
%       %\shadowbox
%       {\OLDincludegraphics[width=8cm]{#1}}}{
%       %\shadowbox
%       {\OLDincludegraphics{#1}}}
%   \fi
% }

\let\origfigure=\figure
\renewenvironment{figure}[6]{
  \origfigure[H]}
{\endlist}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}

% \usepackage{moreverb}
% \usepackage{listings}
% \lstset{
%   numbers=none,
%   basicstyle=\small\ttfamily,
%   columns=flexible,
%   keepspaces=true,
%   breakatwhitespace=false,
%   breaklines=true
% }

\let\cleardoublepage\clearpage
